<!-- ===================================================================
   Build file for Neptus

Copyright (c) 2004-2018 Universidade do Porto - Faculdade de Engenharia
Laboratório de Sistemas e Tecnologia Subaquática (LSTS)
All rights reserved.
Rua Dr. Roberto Frias s/n, sala I203, 4200-465 Porto, Portugal

This file is part of Neptus, Command and Control Framework.

Commercial Licence Usage
Licencees holding valid commercial Neptus licences may use this file
in accordance with the commercial licence agreement provided with the
Software or, alternatively, in accordance with the terms contained in a
written agreement between you and Universidade do Porto. For licensing
terms, conditions, and further information contact lsts@fe.up.pt.

Modified European Union Public Licence - EUPL v.1.1 Usage
Alternatively, this file may be used under the terms of the Modified EUPL,
Version 1.1 only (the "Licence"), appearing in the file LICENCE.md
included in the packaging of this file. You may not use this work
except in compliance with the Licence. Unless required by applicable
law or agreed to in writing, software distributed under the Licence is
distributed on an "AS IS" basis, WITHOUT WARRANTIES OR CONDITIONS OF
ANY KIND, either express or implied. See the Licence for the specific
language governing permissions and limitations at
https://github.com/LSTS/neptus/blob/develop/LICENSE.md
and http://ec.europa.eu/idabc/eupl.html.

For more information please see <http://lsts.fe.up.pt/neptus>.

Authors:
  Paulo Dias <pdias@fe.up.pt>

Copyright:
  (c) FEUP-LSTS, Neptus Team.
==================================================================== -->

<project name="Neptus-SeaCat" default="default" basedir=".">
	<import file="build.xml" as="buildbase"/>
	
	<property name="dist.installer.basename.seacatmk1" value="${Name}SeaCatMK1-${full.release}-x86-32bit-x64-64bit"/>

	<target name="prepare" depends="buildbase.prepare">
		<!--antcall target="buildbase.prepare" inheritall="true" inheritrefs="true" /-->
		
		<property name="dist.installer.name.seacatmk1" value="${dist.installer.basename.seacatmk1}-${scm.last.changed.date.short}"/>

		<filterset id="neptusSeaCatMK1.filters">
			<filter token="NEPTUS_NAME" value="${Name}SeaCatMK1" />
			<filter token="EXTRA_DIST_NAME" value="SeaCat Edition ${full.release}" />
			<filter token="INSTALL_DIR" value="${install.dir.name}SeaCatMK1" />
			<filter token="DIST_EXE" value="${dist.installer.name.seacatmk1}" />
			<filter token="MAIN_CLASS" value="pt.lsts.neptus.mc.seacatmk1.SeaCatMK1Console" />
		</filterset>
	</target>
	
	<!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
	<!-- Distribution Seacon Builders                                        -->
	<!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
	<target name="distribution-seacatmk1" depends="prepare, test-and-fail-for-generated-all-necessary-missing-files, distribution-seacatmk1-all-os, distribution-seacatmk1-linux, distribution-seacatmk1-windows"
			description="Distribution generation for SeaCat flavors, all variants.">
		<antcall target="installer-checksum-worker" inheritall="false">
			<param name="dist.installer.name" value="${dist.installer.name.seacatmk1}" />
		</antcall>
	</target>
	<target name="distribution-seacatmk1-all-os" depends="prepare, test-and-fail-for-generated-all-necessary-missing-files"
			description="Distribution generation for SeaCat flavors, All-OS variant.">
		<antcall target="distribution.worker" inheritall="false" inheritrefs="false">
			<param name="installer-to-call" value="create-installer-all-os.worker"/>
			<param name="jre-os" value="All-OS"/>
			<param name="dist.tmp.dir" value="${all.os.dist.dir}" />
			<param name="sh-bash-basename" value="neptusse" />
			<param name="ignore-includes-common" value="true" />
			<param name="copy-includes-excludes-file-sufix" value="NeptusSeacatMK1" />
			<param name="dist.installer.name" value="${dist.installer.name.seacatmk1}" />
			<param name="dist.instalation.folder.name" value="NeptusSeaCatMK1" />
			<reference refid="neptusSeaCatMK1.filters" torefid="dist.filters" />
			<reference refid="neptus.filters" torefid="common.filters" />
		</antcall>
	</target>
	<target name="distribution-seacatmk1-windows" depends="prepare, test-and-fail-for-generated-all-necessary-missing-files"
			description="Distribution generation for SeaCat flavors, Windows variant.">
		<antcall target="distribution.worker" inheritall="false" inheritrefs="false">
			<param name="installer-to-call" value="create-installer-windows.worker"/>
			<param name="jre-os" value="Windows"/>
			<param name="dist.tmp.dir" value="${windows.dist.dir}" />
			<param name="sh-bash-basename" value="neptusse" />
			<param name="ignore-includes-common" value="true" />
			<param name="copy-includes-excludes-file-sufix" value="NeptusSeacatMK1" />
			<param name="dist.installer.name" value="${dist.installer.name.seacatmk1}" />
			<param name="dist.instalation.folder.name" value="NeptusSeaCatMK1" />
			<reference refid="neptusSeaCatMK1.filters" torefid="dist.filters" />
			<reference refid="neptus.filters" torefid="common.filters" />
		</antcall>
	</target>
	<target name="distribution-seacatmk1-linux" depends="prepare, test-and-fail-for-generated-all-necessary-missing-files"
			description="Distribution generation for SeaCat flavors, Linux variant.">
		<antcall target="distribution.worker" inheritall="false" inheritrefs="false">
			<param name="installer-to-call" value="create-installer-linux.worker"/>
			<param name="jre-os" value="Linux"/>
			<param name="dist.tmp.dir" value="${linux.dist.dir}" />
			<param name="sh-bash-basename" value="neptusse" />
			<param name="ignore-includes-common" value="true" />
			<param name="copy-includes-excludes-file-sufix" value="NeptusSeacatMK1" />
			<param name="dist.installer.name" value="${dist.installer.name.seacatmk1}" />
			<param name="dist.instalation.folder.name" value="NeptusSeaCatMK1" />
			<reference refid="neptusSeaCatMK1.filters" torefid="dist.filters" />
			<reference refid="neptus.filters" torefid="common.filters" />
		</antcall>
	</target>
</project>